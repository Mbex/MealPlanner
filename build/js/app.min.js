!function e(t,n,a){function r(l,o){if(!n[l]){if(!t[l]){var d="function"==typeof require&&require;if(!o&&d)return d(l,!0);if(i)return i(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[l]={exports:{}};t[l][0].call(u.exports,function(e){var n=t[l][1][e];return r(n?n:e)},u,u.exports,e,t,n,a)}return n[l].exports}for(var i="function"==typeof require&&require,l=0;l<a.length;l++)r(a[l]);return r}({1:[function(e,t,n){function a(e){return new Promise(function(t,n){var a=new XMLHttpRequest;a.addEventListener("load",function(e){t(JSON.parse(this.responseText))}),a.addEventListener("error",function(e){n(e)}),a.open("GET",e),a.send()})}function r(e,t){var n=new XMLHttpRequest;n.open("PUT",e),n.send(JSON.stringify(t))}function l(e,t){var n=new XMLHttpRequest;n.open("POST",e),n.send(JSON.stringify(t))}function o(e){var t=new XMLHttpRequest;t.open("DELETE",e),t.send()}function d(e){var t=document.createElement("form");t.setAttribute("action","http://localhost:5000/meals/"),t.setAttribute("class","meal-edit-form");var n=document.createElement("label"),a=document.createElement("input");n.setAttribute("class","field"),n.setAttribute("for","name"),n.innerText="name",a.setAttribute("type","text"),a.setAttribute("name","name");try{a.value=e.name}catch(e){}t.appendChild(n),t.appendChild(a);var n=document.createElement("label");n.setAttribute("for","meal type"),n.innerHTML="Meal Type",t.appendChild(n);var r=document.createElement("select");r.setAttribute("name","meal type"),r.setAttribute("value","Meal");var i=["dinner","breakfast","lunch","snack"];return i.forEach(function(n){var a=document.createElement("option");a.setAttribute("value",n),a.innerHTML=n;try{n==e.meal_type&&a.setAttribute("selected","selected")}catch(e){}r.appendChild(a),t.appendChild(r)}),options=["ingredients","method"],options.forEach(function(n){var a=(document.createElement("option"),document.createElement("label"));a.setAttribute("for",n),a.innerHTML=n;var r=document.createElement("textarea");r.setAttribute("name",n),r.setAttribute("rows",10),r.setAttribute("cols",30);try{for(key in e[n])r.value+=JSON.stringify(e[n][key]).concat(" ",JSON.stringify(key),"\r\n").replace(/[",]/g,"")}catch(e){}t.appendChild(a),t.appendChild(r)}),t}function c(){a(h.concat("meals/")).then(function(e){if(console.log(e),e.length<1)console.log("no meals in database!");else{var t=document.getElementById("db-meal-list");e.forEach(function(e){var n=h.concat("meals/_id/<value>/").replace("<value>",e._id),a=document.createElement("h2"),i=document.createElement("div"),l=(document.createElement("p"),document.createElement("p"),document.createElement("button")),c=d(e),u=document.createElement("button");u.setAttribute("type","button"),u.innerText="Update",u.addEventListener("click",function(t){var a={};a._id=e._id;var l=i.childNodes[0].childNodes,o="",d="";l.forEach(function(e){"LABEL"==e.nodeName?o=e.getAttribute("FOR"):"INPUT"==e.nodeName|"SELECT"==e.nodeName|"TEXTAREA"==e.nodeName&&(d=e.value),a[o]=d}),r(n,a)}),a.innerText=e.name,a.setAttribute("tabindex","1"),i.setAttribute("id",e._id),i.setAttribute("class","hide"),l.innerHTML="Delete",l.addEventListener("click",function(e){confirm("Are you sure you want to permenantly remove this meal?")&&(o(n),i.parentNode.removeChild(i))}),t.appendChild(a),t.appendChild(i),i.appendChild(l),i.appendChild(c),c.appendChild(u)})}})}function u(){var e=d(),t=document.getElementById("entries"),n=document.createElement("input");n.setAttribute("type","submit"),n.setAttribute("value","Submit"),e.setAttribute("method","POST"),e.appendChild(n),t.appendChild(e)}function m(e,t){var n=document.getElementById("results");if(null==n){var n=document.createElement("div");n.setAttribute("id","results")}return new Promise(function(r,i){a(h.concat("meals/random?n=<n>").replace("<n>",t)).then(function(t){t.result.forEach(function(e){var t=document.createElement("div"),a=document.createElement("h4"),r=document.createElement("div");t.setAttribute("class","result_div"),t.setAttribute("id",e._id),a.innerText=e.name,t.appendChild(a),kv_pair=e.ingredients;for(key in kv_pair){var i=document.createElement("p");i.innerText=key.concat(", ").concat(kv_pair[key]),r.appendChild(i),t.appendChild(r)}var l=document.createElement("button");l.setAttribute("type","button"),l.innerText="remove",t.append(l),l.addEventListener("click",function(e){this.parentNode.remove()}),n.appendChild(t)});var a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("id","save_button"),a.innerText="save",a.addEventListener("click",function(t){for(var n=[],a=document.getElementsByClassName("result_div"),r=0,i=a.length;r<i;r++)n.push(a[r].getAttribute("id"));console.log(e),l("http://localhost:5000/mealplan/",{name:e,ids:n})});var i=document.createElement("button");i.setAttribute("type","button"),i.innerText="add",i.addEventListener("click",function(e){this.remove(),document.getElementById("save_button").remove(),m("","1").then(function(e){var t=document.getElementById("results_parent");t.appendChild(e)})}),n.appendChild(i),n.appendChild(a),r(n)})})}function s(){var e=document.createElement("form"),t=document.createElement("label"),n=document.createElement("input"),a=document.createElement("label"),r=document.createElement("input"),i=document.createElement("button"),l=document.getElementById("generator");n.setAttribute("type","text"),n.setAttribute("name","name"),t.setAttribute("class","field"),t.setAttribute("for","name"),t.innerText="Name",r.setAttribute("type","text"),r.setAttribute("name","n"),a.setAttribute("class","field"),a.setAttribute("for","n"),a.innerText="Number of Meals",t.appendChild(n),a.appendChild(r),e.appendChild(t),e.appendChild(a),e.setAttribute("class","mealplan-form"),i.setAttribute("type","button"),i.innerText="Go!",i.addEventListener("click",function(e){try{document.getElementById("results_parent").innerHTML=""}catch(e){console.log(e)}m(n.value,r.value).then(function(e){var t=document.getElementById("results_parent");t.appendChild(e)})}),e.appendChild(i),l.append(e)}function p(){a(h.concat("mealplan/")).then(function(e){if(e.length<1)console.log("no meals in database!");else{var t=document.getElementById("db-mealplan-list");e.forEach(function(e){var n=h.concat("mealplan/_id/<value>/").replace("<value>",e._id),r=document.createElement("h2"),l=document.createElement("div"),d=(document.createElement("p"),document.createElement("button")),c=e.name;r.setAttribute("class","hide-me"),e.meal_ids.forEach(function(t){var n=h.concat("meals/_id/<value>/").replace("<value>",t),r=document.createElement("p");l.setAttribute("id",e._id),l.appendChild(r),a(n).then(function(e){r.innerText=e._id[0].name})}),d.innerHTML="Delete",d.addEventListener("click",function(e){confirm("Are you sure you want to permenantly remove this mealplan?")&&(o(n),l.parentNode.removeChild(l))});var u=document.createElement("div");u.setAttribute("class","hide-me");var m=document.createElement("h3");m.innerText="Shopping List",a(h.concat("shoppinglist/<mealplan_id>").replace("<mealplan_id>",e._id)).then(function(e){for(key in e){var t=document.createElement("p");t.innerText=key,u.appendChild(t);for(i in e[key])if(e[key][i]>0){var n=document.createElement("p");n.innerText=e[key][i],u.append(n)}else if(e[key][i].constructor===Object)for(k in e[key][i]){var n=document.createElement("p");n.innerText=e[key][i][k].toString().concat(k),u.append(n)}}}),l.appendChild(m),l.appendChild(u),l.appendChild(d),t.appendChild(l),r.innerText=c,t.appendChild(r)})}})}var h="http://localhost:5000/",f=document.URL.substr(document.URL.lastIndexOf("/")+1);"new_meal.html"==f?u():"meal_database.html"==f?c():"new_mealplan.html"==f?s():"mealplan_database.html"==f&&p()},{}]},{},[1]);
//# sourceMappingURL=app.min.js.map
