{"version":3,"sources":["app.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","httpGet","theUrl","Promise","resolve","reject","page","XMLHttpRequest","addEventListener","evt","JSON","parse","this","responseText","error","open","send","httpDelete","mealEntryForm","meal","form","document","createElement","setAttribute","label","input","innerText","name","appendChild","innerHTML","select","types","forEach","typ","type","meal_type","options","textarea","stringify","populateMealDBList","LOCAL_HOST","concat","then","all_meals","dsp_meals","getElementById","del_addr","replace","_id","entry_parent","entry_del_button","meal_entry_form","submit","confirm","parentNode","removeChild","POSTMealEntryForm","title","FNAME","URL","substr","lastIndexOf"],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar LOCAL_HOST = 'http://127.0.0.1:5000/';\nvar FNAME = document.URL.substr(document.URL.lastIndexOf('/')+1);\n\nfunction httpGet(theUrl) {\n    return new Promise( function(resolve, reject) {\n        var page = new XMLHttpRequest();\n        page.addEventListener('load', function(evt){\n            resolve(JSON.parse(this.responseText));\n        });\n        page.addEventListener('error', function(error){\n            reject(error);\n        });\n        page.open(\"GET\", theUrl);\n        page.send();\n    });\n};\n\nfunction httpPut(theUrl) {\n    return new Promise( function(resolve, reject) {\n        var page = new XMLHttpRequest();\n        page.addEventListener('load', function(evt){\n            resolve(JSON.parse(this.responseText));\n        });\n        page.addEventListener('error', function(error){\n            reject(error);\n        });\n        page.open(\"PUT\", theUrl);\n        page.send();\n    });\n};\n\nfunction httpDelete(theUrl) {\n      var page = new XMLHttpRequest();\n      page.open(\"DELETE\", theUrl);\n      page.send();\n};\n\n\nfunction mealEntryForm(meal) {\n\n  var form = document.createElement('form');\n  form.setAttribute('action', \"http://127.0.0.1:5000/meals/\");\n  form.setAttribute('class', 'meal-edit-form');\n\n  var label = document.createElement('label');\n  var input = document.createElement('input');\n\n  label.setAttribute('class', 'field');\n  label.setAttribute('for', 'name');\n  label.innerText = 'name';\n\n  input.setAttribute('type', 'text');\n  input.setAttribute('name', 'name');\n  try {\n    input.setAttribute('placeholder', meal.name);\n  } catch(e){};\n\n  form.appendChild(label);\n  form.appendChild(input);\n\n  var label = document.createElement('label');\n  label.setAttribute('for', 'meal type');\n  label.innerHTML = 'Meal Type';\n  form.appendChild(label);\n\n  var select = document.createElement('select');\n  select.setAttribute('name', 'meal type');\n  select.setAttribute('value', 'Meal');\n\n  var types = ['dinner','breakfast','lunch','snack'];\n  types.forEach( function(typ) {\n    var type = document.createElement('option');\n    type.setAttribute('value', typ);\n    type.innerHTML = typ;\n    try{\n      if (typ == meal.meal_type) {\n        type.setAttribute('selected', 'selected');\n      };\n    } catch (e){};\n    select.appendChild(type);\n    form.appendChild(select);\n  });\n\n  options = ['ingredients','method'];\n  options.forEach( function(o) {\n    var option = document.createElement('option');\n    var label = document.createElement('label');\n\n    label.setAttribute('for', o);\n    label.innerHTML = o;\n\n    var textarea = document.createElement('textarea');\n    textarea.setAttribute('name', o);\n    textarea.setAttribute('rows', 10);\n    textarea.setAttribute('cols', 30);\n    try{\n      textarea.setAttribute('placeholder', JSON.stringify(meal[o]));\n    }catch(e) {};\n    label.appendChild(textarea);\n    form.appendChild(label);\n  });\n\n  return form;\n\n};\n\n\nfunction populateMealDBList() {\n\n  // populate database list of meals with functionality\n\n  httpGet(LOCAL_HOST.concat('meals/')).then( function (all_meals) {\n\n    var dsp_meals = document.getElementById('db-meal-list');\n\n    all_meals.forEach( function(meal) {\n\n      var del_addr = LOCAL_HOST.concat('meals/_id/<value>').replace('<value>', meal._id);\n      var entry_parent = document.createElement('div');\n      var entry_major = document.createElement(\"p\");\n      var entry_minor = document.createElement(\"p\");\n      var entry_del_button = document.createElement('button');\n      var edit_open = 0;\n      var meal_entry_form = mealEntryForm(meal);\n      var submit = document.createElement('input');\n\n      submit.setAttribute('type','submit');\n      submit.setAttribute('value','Submit');\n      entry_parent.setAttribute('id', meal._id);\n      entry_del_button.innerHTML = 'Delete';\n      entry_del_button.addEventListener('click', function(evt) {\n        if (confirm(\"Are you sure you want to permenantly remove this meal?\")) {\n          httpDelete(del_addr);\n          entry_parent.parentNode.removeChild(entry_parent);\n        }\n      });\n      meal_entry_form.setAttribute('method', 'PUT');\n      meal_entry_form.appendChild(submit);\n      entry_parent.appendChild(meal_entry_form);\n      entry_parent.appendChild(entry_del_button);\n      dsp_meals.appendChild(entry_parent);\n\n    });\n  });\n};\n\n\nfunction POSTMealEntryForm() {\n\n\n  var meal_entry_form = mealEntryForm();\n  var title = document.getElementById('entries');\n  var submit = document.createElement('input');\n  submit.setAttribute('type','submit');\n  submit.setAttribute('value','Submit');\n  meal_entry_form.setAttribute('method', 'POST');\n  meal_entry_form.appendChild(submit);\n  title.appendChild(meal_entry_form);\n\n};\n\n\n\n\n// main\nif (FNAME == 'meal_search.html'){\n\n  populateMealDBList();\n\n} else if (FNAME == 'meal_entry_form.html') {\n\n  POSTMealEntryForm();\n\n}\n\n},{}]},{},[1]);\n"]}