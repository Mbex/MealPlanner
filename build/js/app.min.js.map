{"version":3,"sources":["app.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","httpGet","theUrl","Promise","resolve","reject","page","XMLHttpRequest","addEventListener","evt","JSON","parse","this","responseText","error","open","send","httpPut","update_object","stringify","httpPost","object","httpDelete","mealEntryForm","meal","form","document","createElement","setAttribute","label","input","innerText","value","name","appendChild","innerHTML","select","types","forEach","typ","type","meal_type","options","textarea","key","concat","replace","populateMealDBList","LOCAL_HOST","then","all_meals","console","log","dsp_meals","getElementById","meal_addr","_id","entry_title","entry_parent","entry_del_button","meal_entry_form","update_button","obj_elements","childNodes","el","nodeName","getAttribute","confirm","parentNode","removeChild","POSTMealEntryForm","title","submit","RandomMealGenerator","results_div","randomResults","result","element","result_div","meal_name","ingredient_div","kv_pair","ingredients","kv_line","remove_button","append","remove","save_button","ids","elements","getElementsByClassName","len","push","add_button","results_parent_div","MealPlanGeneratorForm","label2","input2","generator_div","populateMealplanDBList","all_mealplans","meal_plan","meal_plan_name","meal_ids","id","entry_minor","list_div","shopping_list_h3","results","list_key_p","list_val_p","constructor","Object","k","toString","FNAME","URL","substr","lastIndexOf"],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar LOCAL_HOST = 'http://localhost:5000/';\nvar FNAME = document.URL.substr(document.URL.lastIndexOf('/')+1);\n\n\nfunction GetHeaders(theUrl){\n  var req = new XMLHttpRequest();\n  req.open('GET', theUrl, false);\n  req.send(null);\n  var headers = req.getAllResponseHeaders().toLowerCase();\n  alert(headers);\n}\n\nfunction httpGet(theUrl) {\n    return new Promise( function(resolve, reject) {\n        var page = new XMLHttpRequest();\n        page.addEventListener('load', function(evt){\n            resolve(JSON.parse(this.responseText));\n        });\n        page.addEventListener('error', function(error){\n            reject(error);\n        });\n        page.open(\"GET\", theUrl);\n        page.send();\n\n    });\n};\n\nfunction httpPut(theUrl, update_object) {\n        var page = new XMLHttpRequest();\n        page.open(\"PUT\", theUrl);\n        page.send(JSON.stringify(update_object));\n};\n\nfunction httpPost(theUrl, object) {\n        var page = new XMLHttpRequest();\n        page.open(\"POST\", theUrl);\n        page.send(JSON.stringify(object));\n};\n\nfunction httpDelete(theUrl) {\n    var page = new XMLHttpRequest();\n    page.open(\"DELETE\", theUrl);\n    page.send();\n};\n\n\n\nfunction mealEntryForm(meal) {\n\n  var form = document.createElement('form');\n  form.setAttribute('action', \"http://localhost:5000/meals/\");\n  form.setAttribute('class', 'meal-edit-form');\n\n  var label = document.createElement('label');\n  var input = document.createElement('input');\n\n  label.setAttribute('class', 'field');\n  label.setAttribute('for', 'name');\n  label.innerText = 'name';\n  input.setAttribute('type', 'text');\n  input.setAttribute('name', 'name');\n  try {\n    input.value =  meal.name;\n  } catch (e) {};\n\n  form.appendChild(label);\n  form.appendChild(input);\n\n  var label = document.createElement('label');\n  label.setAttribute('for', 'meal type');\n  label.innerHTML = 'Meal Type';\n  form.appendChild(label);\n\n  var select = document.createElement('select');\n  select.setAttribute('name', 'meal type');\n  select.setAttribute('value', 'Meal');\n\n  var types = ['dinner','breakfast','lunch','snack'];\n  types.forEach( function(typ) {\n    var type = document.createElement('option');\n    type.setAttribute('value', typ);\n    type.innerHTML = typ;\n    try{\n      if (typ == meal.meal_type) {\n        type.setAttribute('selected', 'selected');\n      };\n    } catch (e){};\n    select.appendChild(type);\n    form.appendChild(select);\n  });\n\n  options = ['ingredients','method'];\n  options.forEach( function(o) {\n    var option = document.createElement('option');\n    var label = document.createElement('label');\n\n    label.setAttribute('for', o);\n    label.innerHTML = o;\n\n    var textarea = document.createElement('textarea');\n    textarea.setAttribute('name', o);\n    textarea.setAttribute('rows', 10);\n    textarea.setAttribute('cols', 30);\n    try{\n      for (key in meal[o]){\n        textarea.value += JSON.stringify(meal[o][key]).concat(\" \", JSON.stringify(key), \"\\r\\n\").replace(/[\",]/g,\"\");\n      }\n    } catch(e) {};\n    form.appendChild(label);\n    form.appendChild(textarea);\n  });\n\n  return form;\n\n};\n\nfunction populateMealDBList() {\n\n  // populate database list of meals with functionality\n\n  httpGet(LOCAL_HOST.concat('meals/')).then( function (all_meals) {\n\n   console.log(all_meals);\n\n    if (all_meals.length < 1){\n\n      console.log(\"no meals in database!\");\n\n    } else {\n\n\n      var dsp_meals = document.getElementById('db-meal-list');\n\n      all_meals.forEach( function(meal) {\n\n        var meal_addr = LOCAL_HOST.concat('meals/_id/<value>/').replace('<value>', meal._id);\n        var entry_title = document.createElement('h2');\n\n        var entry_parent = document.createElement('div');\n        var entry_major = document.createElement(\"p\");\n        var entry_minor = document.createElement(\"p\");\n        var entry_del_button = document.createElement('button');\n        var edit_open = 0;\n        var meal_entry_form = mealEntryForm(meal);\n        var update_button = document.createElement('button');\n\n        update_button.setAttribute('type','button');\n        update_button.innerText = \"Update\";\n        update_button.addEventListener('click', function(evt){\n            var update_object = {};\n            update_object._id = meal._id;\n            var obj_elements = entry_parent.childNodes[0].childNodes;\n            var key = \"\";\n            var value = \"\";\n            obj_elements.forEach(function(el){\n                if (el.nodeName == \"LABEL\"){\n                    key = el.getAttribute(\"FOR\");\n                } else if (el.nodeName == \"INPUT\" | el.nodeName == \"SELECT\" | el.nodeName == \"TEXTAREA\"){\n                    value = el.value;\n                }\n              update_object[key] = value;\n            });\n            httpPut(meal_addr, update_object);\n        });\n\n        entry_title.innerText = meal.name;\n        entry_title.setAttribute('tabindex', \"1\");\n\n        entry_parent.setAttribute('id', meal._id);\n        entry_parent.setAttribute('class', \"hide\");\n\n        entry_del_button.innerHTML = 'Delete';\n        entry_del_button.addEventListener('click', function(evt) {\n          if (confirm(\"Are you sure you want to permenantly remove this meal?\")) {\n            httpDelete(meal_addr);\n            entry_parent.parentNode.removeChild(entry_parent);\n          }\n        });\n\n        dsp_meals.appendChild(entry_title);\n        dsp_meals.appendChild(entry_parent);\n        entry_parent.appendChild(entry_del_button);\n        entry_parent.appendChild(meal_entry_form);\n        meal_entry_form.appendChild(update_button);\n\n      });\n    };\n  });\n};\n\nfunction POSTMealEntryForm() {\n\n  var meal_entry_form = mealEntryForm();\n  var title = document.getElementById('entries');\n  var submit = document.createElement('input');\n  submit.setAttribute('type','submit');\n  submit.setAttribute('value','Submit');\n  meal_entry_form.setAttribute('method', 'POST');\n  meal_entry_form.appendChild(submit);\n  title.appendChild(meal_entry_form);\n\n};\n\n\n\nfunction RandomMealGenerator(name, n) {\n\n    var results_div = document.getElementById('results');\n    if (results_div == null) {\n      var results_div = document.createElement('div');\n      results_div.setAttribute('id', \"results\");\n    };\n\n  return new Promise( function(resolve, reject) {\n\n    httpGet(LOCAL_HOST.concat('meals/random?n=<n>').replace('<n>', n)).then( function (randomResults) {\n\n      randomResults.result.forEach( function (element){\n\n         var result_div = document.createElement('div')\n         var meal_name = document.createElement('h4');\n         var ingredient_div = document.createElement('div')\n\n         result_div.setAttribute(\"class\",\"result_div\");\n         result_div.setAttribute(\"id\",element._id);\n         meal_name.innerText = element.name;\n         result_div.appendChild(meal_name);\n\n         kv_pair = element.ingredients;\n         for (key in kv_pair){\n           var kv_line = document.createElement('p');\n           kv_line.innerText = key.concat(\", \").concat(kv_pair[key]);\n           ingredient_div.appendChild(kv_line);\n           result_div.appendChild(ingredient_div);\n         };\n\n         var remove_button = document.createElement('button');\n         remove_button.setAttribute('type','button');\n         remove_button.innerText= 'remove';\n         result_div.append(remove_button);\n         remove_button.addEventListener('click', function (evt) {\n           this.parentNode.remove();\n         });\n\n         results_div.appendChild(result_div);\n      });\n\n      var save_button = document.createElement('button');\n      save_button.setAttribute('type','button');\n      save_button.setAttribute('id','save_button');\n      save_button.innerText= 'save';\n      save_button.addEventListener('click', function (evt) {\n        var ids = []; // put meal ids of mealplan into array\n        var elements = document.getElementsByClassName(\"result_div\");\n        for (var i=0, len=elements.length; i<len; i++) {\n           ids.push(elements[i].getAttribute(\"id\"));\n        };\n        console.log(name)\n        httpPost(\"http://localhost:5000/mealplan/\",{\"name\" : name, \"ids\" : ids});\n      });\n\n      var add_button = document.createElement('button');\n      add_button.setAttribute('type','button');\n      add_button.innerText= 'add';\n      add_button.addEventListener('click', function (evt) {\n        this.remove();\n        document.getElementById(\"save_button\").remove();\n        RandomMealGenerator(\"\",\"1\").then( function(results_div) {\n          var results_parent_div = document.getElementById('results_parent');\n          results_parent_div.appendChild(results_div);\n        });\n      });\n      results_div.appendChild(add_button);\n      results_div.appendChild(save_button);\n      resolve(results_div);\n    });\n  });\n}\n\nfunction MealPlanGeneratorForm() {\n\n  var form = document.createElement('form');\n  var label = document.createElement('label');\n  var input = document.createElement('input');\n  var label2 = document.createElement('label');\n  var input2 = document.createElement('input');\n  var submit = document.createElement('button');\n  var generator_div = document.getElementById(\"generator\");\n\n  input.setAttribute('type', 'text');\n  input.setAttribute('name', 'name');\n  label.setAttribute('class', 'field');\n  label.setAttribute('for', 'name');\n  label.innerText = 'Name';\n\n  input2.setAttribute('type', 'text');\n  input2.setAttribute('name', 'n');\n  label2.setAttribute('class', 'field');\n  label2.setAttribute('for', 'n');\n  label2.innerText = 'Number of Meals';\n\n  label.appendChild(input);\n  label2.appendChild(input2);\n  form.appendChild(label);\n  form.appendChild(label2);\n  form.setAttribute('class', 'mealplan-form');\n\n  submit.setAttribute('type','button');\n  submit.innerText= 'Go!';\n  submit.addEventListener('click', function (evt) {\n    try { // delete parent element if its already been initialised\n      document.getElementById('results_parent').innerHTML = \"\";\n    } catch(e){\n      console.log(e);\n    };\n\n    // puts random meals into divs and appends to DOM\n    RandomMealGenerator(input.value, input2.value).then( function(results_div) {\n      var results_parent_div = document.getElementById('results_parent');\n      results_parent_div.appendChild(results_div);\n    });\n  });\n\n  form.appendChild(submit);\n  generator_div.append(form);\n\n};\n\nfunction populateMealplanDBList() {\n\n  // populate database list of mealplans with functionality\n\n  httpGet(LOCAL_HOST.concat('mealplan/')).then( function (all_mealplans) {\n\n    if (all_mealplans.length < 1){\n      console.log(\"no meals in database!\");\n    } else {\n\n      var dsp_meals = document.getElementById('db-mealplan-list');\n\n      all_mealplans.forEach( function(meal_plan) {\n\n        var meal_addr = LOCAL_HOST.concat('mealplan/_id/<value>/').replace('<value>', meal_plan._id);\n        var entry_title = document.createElement(\"h2\");\n        var entry_parent = document.createElement('div');\n        var entry_major = document.createElement(\"p\");\n        var entry_del_button = document.createElement('button');\n        var edit_open = 0;\n        var meal_plan_name = meal_plan.name;\n        entry_title.setAttribute('class','hide-me')\n        // entry_parent.setAttribute('tabindex', \"1\")\n\n        meal_plan.meal_ids.forEach( function(id) {\n          var meal_addr = LOCAL_HOST.concat('meals/_id/<value>/').replace('<value>', id);\n          var entry_minor = document.createElement(\"p\");\n          entry_parent.setAttribute('id', meal_plan._id);\n          entry_parent.appendChild(entry_minor);\n          httpGet(meal_addr).then(function (meal) {\n            entry_minor.innerText = meal._id[0].name;\n          });\n        });\n\n        entry_del_button.innerHTML = 'Delete';\n        entry_del_button.addEventListener('click', function(evt) {\n          if (confirm(\"Are you sure you want to permenantly remove this mealplan?\")) {\n            httpDelete(meal_addr);\n            entry_parent.parentNode.removeChild(entry_parent);\n          };\n        });\n\n        var list_div = document.createElement('div');\n        list_div.setAttribute('class','hide-me');\n        // entry_parent.setAttribute('tabindex', \"1\")\n\n        var shopping_list_h3 = document.createElement('h3');\n        shopping_list_h3.innerText = \"Shopping List\";\n\n        httpGet(LOCAL_HOST.concat('shoppinglist/<mealplan_id>').replace('<mealplan_id>', meal_plan._id)).then( function (results) {\n          for (key in results){\n            var list_key_p = document.createElement(\"p\");\n\n            list_key_p.innerText = key;\n            list_div.appendChild(list_key_p);\n\n            for (i in results[key]){\n              if (results[key][i] > 0) {\n\n                var list_val_p = document.createElement(\"p\");\n                list_val_p.innerText = results[key][i];\n                list_div.append(list_val_p);\n\n              } else if (results[key][i].constructor === Object) {\n\n                for (k in results[key][i]){\n\n                  var list_val_p = document.createElement(\"p\");\n                  list_val_p.innerText = (results[key][i][k]).toString().concat(k);\n                  list_div.append(list_val_p);\n\n                };\n\n              } else {\n                // PASS\n              };\n            };\n          };\n        });\n\n        entry_parent.appendChild(shopping_list_h3);\n        entry_parent.appendChild(list_div);\n        entry_parent.appendChild(entry_del_button);\n        dsp_meals.appendChild(entry_parent);\n        entry_title.innerText = meal_plan_name; // THIS isnt always working\n        dsp_meals.appendChild(entry_title);\n\n      });\n    };\n  });\n};\n\n\n\n// main\nif (FNAME == 'new_meal.html') {\n\n  POSTMealEntryForm();\n\n} else if (FNAME == 'meal_database.html'){\n\n  populateMealDBList();\n\n} else if (FNAME == 'new_mealplan.html'){\n\n  MealPlanGeneratorForm();\n\n} else if (FNAME == 'mealplan_database.html'){\n\n  populateMealplanDBList();\n\n}\n\n},{}]},{},[1]);\n"]}